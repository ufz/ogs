#Source files grouped by a directory
GET_SOURCE_FILES(SOURCES_NUMLIB)
set(SOURCES ${SOURCES_NUMLIB})

GET_SOURCE_FILES(SOURCES_ASSEMBLER Assembler)
set(SOURCES ${SOURCES} ${SOURCES_ASSEMBLER})
GET_SOURCE_FILES(SOURCES_DOF DOF)
set(SOURCES ${SOURCES} ${SOURCES_DOF})

GET_SOURCE_FILES(SOURCES_FEM Fem)
set(SOURCES ${SOURCES} ${SOURCES_FEM})
GET_SOURCE_FILES(SOURCES_FEM_COORDINATESMAPPING Fem/CoordinatesMapping)
set(SOURCES ${SOURCES} ${SOURCES_FEM_COORDINATESMAPPING})
GET_SOURCE_FILES(SOURCES_FEM_FINTIEELEMENT Fem/FiniteElement)
set(SOURCES ${SOURCES} ${SOURCES_FEM_FINTIEELEMENT})
GET_SOURCE_FILES(SOURCES_FEM_INTEGRATION Fem/Integration)
set(SOURCES ${SOURCES} ${SOURCES_FEM_INTEGRATION})
GET_SOURCE_FILES(SOURCES_FEM_SHAPEFUNCTION Fem/ShapeFunction)
set(SOURCES ${SOURCES} ${SOURCES_FEM_SHAPEFUNCTION})

GET_SOURCE_FILES(SOURCES_TIMESTEP TimeStepping)
GET_SOURCE_FILES(SOURCES_TIMESTEP_ALGORITHMS TimeStepping/Algorithms)
set(SOURCES ${SOURCES} ${SOURCES_TIMESTEP} ${SOURCES_TIMESTEP_ALGORITHMS})

GET_SOURCE_FILES(SOURCES_FUNCTION Function)
set(SOURCES ${SOURCES} ${SOURCES_FUNCTION})
GET_SOURCE_FILES(SOURCES_DISTRIBUTION Distribution)
set(SOURCES ${SOURCES} ${SOURCES_DISTRIBUTION})

GET_SOURCE_FILES(SOURCES_ODESOLVER ODESolver)
set(SOURCES ${SOURCES} ${SOURCES_ODESOLVER})

GET_SOURCE_FILES(SOURCES_EXTRAPOLATION Extrapolation)
set(SOURCES ${SOURCES} ${SOURCES_EXTRAPOLATION})

if(MSVC)
    include_directories(
        ${CMAKE_CURRENT_BINARY_DIR}/../MathLib
        ${CMAKE_CURRENT_BINARY_DIR}/../MeshLib
        )
endif()

# Create the library
add_library(NumLib ${SOURCES})

if(MSVC)
    include(GenerateExportHeader)
    generate_export_header(NumLib)
endif()

set_target_properties(NumLib PROPERTIES LINKER_LANGUAGE CXX)

target_link_libraries(NumLib
    BaseLib
    GeoLib
    MathLib
    MeshLib
    MeshGeoToolsLib
    logog
)

if(TARGET Eigen)
    add_dependencies(NumLib Eigen)
endif()
if(TARGET Boost)
    add_dependencies(NumLib Boost)
endif()
