# Source files
set( SOURCES
	ColorTableModel.cpp
	ColorTableView.cpp
	CondFromRasterDialog.cpp
	DataExplorerSettingsDialog.cpp
	DirectConditionGenerator.cpp
	ElementTreeModel.cpp
	ElementTreeView.cpp
	GeoMapper.cpp
	GEOModels.cpp
	GeoOnMeshMappingDialog.cpp
	GeoTabWidget.cpp
	GeoTreeModel.cpp
	GeoTreeView.cpp
	GMSHPrefsDialog.cpp
	LicenseDialog.cpp
	LinearEditDialog.cpp
	LineEditDialog.cpp
	ListPropertiesDialog.cpp
	MergeGeometriesDialog.cpp
	MeshAnalysisDialog.cpp
	MeshElementRemovalDialog.cpp
	MeshValueEditDialog.cpp
	ModellingTabWidget.cpp
	ModelTreeItem.cpp
	MeshLayerEditDialog.cpp
	MshItem.cpp
	MshModel.cpp
	MshQualitySelectionDialog.cpp
	MshTabWidget.cpp
	MshView.cpp
	NetCdfConfigureDialog.cpp
	SaveMeshDialog.cpp
	SelectMeshDialog.cpp
	SetNameDialog.cpp
	SHPImportDialog.cpp
	StationTabWidget.cpp
	StationTreeModel.cpp
	StationTreeView.cpp
)

# Moc Header files
set( MOC_HEADERS
	ColorTableModel.h
	ColorTableView.h
	CondFromRasterDialog.h
	DataExplorerSettingsDialog.h
	ElementTreeModel.h
	ElementTreeView.h
	GEOModels.h
	GeoOnMeshMappingDialog.h
	GeoTabWidget.h
	GeoTreeModel.h
	GeoTreeView.h
	GMSHPrefsDialog.h
	LicenseDialog.h
	LinearEditDialog.h
	LineEditDialog.h
	ListPropertiesDialog.h
	MergeGeometriesDialog.h
	MeshAnalysisDialog.h
	MeshElementRemovalDialog.h
	MeshValueEditDialog.h
	ModellingTabWidget.h
	MeshLayerEditDialog.h
	MshModel.h
	MshQualitySelectionDialog.h
	MshTabWidget.h
	MshView.h
	NetCdfConfigureDialog.h
	SaveMeshDialog.h
	SelectMeshDialog.h
	SetNameDialog.h
	SHPImportDialog.h
	StationTabWidget.h
	StationTreeModel.h
	StationTreeView.h
)

# Header files
set( HEADERS
	BaseItem.h
	CondItem.h
	DirectConditionGenerator.h
	CondObjectListItem.h
	GeoMapper.h
	GeoObjectListItem.h
	GeoTreeItem.h
	ModelTreeItem.h
	MshItem.h
)

# UI files
set( UIS
	CondFromRaster.ui
	ConditionWriter.ui
	DataExplorerSettings.ui
	FEMConditionSetup.ui
	GeoOnMeshMapping.ui
	GeoTabWidgetBase.ui
	GMSHPrefs.ui
	License.ui
	LinearEdit.ui
	LineEdit.ui
	MergeGeometries.ui
	MeshAnalysis.ui
	MeshValueEdit.ui
	ModellingTabWidgetBase.ui
	MeshElementRemoval.ui
	MeshLayerEdit.ui
	MshQualitySelection.ui
	MshTabWidgetBase.ui
	NetCdfConfigure.ui
	NewProcess.ui
	SaveMesh.ui
	StationTabWidgetBase.ui
)

# Put filter in a folder
SOURCE_GROUP("Dialog Header Files" REGULAR_EXPRESSION "[.]*Dialog.h")
SOURCE_GROUP("Dialog Source Files" REGULAR_EXPRESSION "[.]*Dialog.cpp")
SOURCE_GROUP("Data Model Header Files" REGULAR_EXPRESSION "[.]*Item.h|[.]*Model.h|[.]*View.h")
SOURCE_GROUP("Data Model Source Files" REGULAR_EXPRESSION "[.]*Item.cpp|[.]*Model.cpp|[.]*View.cpp")

# Run Qts user interface compiler uic on .ui files
qt4_wrap_ui( UI_HEADERS ${UIS} )

# Run Qts meta object compiler moc on header files
qt4_wrap_cpp( MOC_SOURCES ${MOC_HEADERS} )


# Include the headers which are generated by uic and moc
# and include additional header
SET(SOURCE_DIR_REL ${CMAKE_CURRENT_SOURCE_DIR}/../../..)
SET(GUI_SOURCE_DIR_REL ${CMAKE_CURRENT_SOURCE_DIR}/..)
include_directories(
	${CMAKE_CURRENT_BINARY_DIR}/../Base
	${CMAKE_CURRENT_BINARY_DIR}
	${CMAKE_CURRENT_BINARY_DIR}/DiagramView
	${CMAKE_CURRENT_BINARY_DIR}/StratView

	${SOURCE_DIR_REL}/BaseLib
	${SOURCE_DIR_REL}/MathLib
	${SOURCE_DIR_REL}/GeoLib
	${SOURCE_DIR_REL}/MeshLib
	${SOURCE_DIR_REL}/FileIO
	${CMAKE_CURRENT_SOURCE_DIR}
	${CMAKE_CURRENT_SOURCE_DIR}/DiagramView
	${CMAKE_CURRENT_SOURCE_DIR}/StratView
	${GUI_SOURCE_DIR_REL}/Base
	${GUI_SOURCE_DIR_REL}/VtkVis
)

IF (VTKOSGCONVERTER_FOUND)
	INCLUDE_DIRECTORIES( ${VTKOSGCONVERTER_INCLUDE_DIRS} )
ENDIF (VTKOSGCONVERTER_FOUND)

IF (GEOTIFF_FOUND)
	INCLUDE_DIRECTORIES( ${GEOTIFF_INCLUDE_DIRS} )
ENDIF () # GEOTIFF_FOUND

# Put moc files in a project folder
source_group("UI Files" REGULAR_EXPRESSION "\\w*\\.ui")
source_group("Moc Files" REGULAR_EXPRESSION "moc_.*")


# Create the library
add_library( QtDataView STATIC
	${SOURCES}
	${HEADERS}
	${MOC_HEADERS}
	${MOC_SOURCES}
	#${UI_HEADERS}
	${UIS}
)

# Link Qt library
target_link_libraries( QtDataView
	${QT_LIBRARIES}
	FileIO
	GeoLib
	MeshLib
	QtBase
	QtDiagramView
	QtStratView
	shp
)

INCLUDE(AddCatalystDependency)
ADD_CATALYST_DEPENDENCY(QtDataView)

IF (GEOTIFF_FOUND)
	TARGET_LINK_LIBRARIES( QtDataView ${GEOTIFF_LIBRARIES} )
ENDIF () # GEOTIFF_FOUND

set_property(TARGET QtDataView PROPERTY FOLDER "DataExplorer")
